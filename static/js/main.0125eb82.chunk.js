(this["webpackJsonpschedule-planner"]=this["webpackJsonpschedule-planner"]||[]).push([[0],{122:function(e,t,a){},124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),s=a.n(c),o=a(31),l=a.n(o),u=a(51),i=a(44),m=a(26),d=a(75),p=a(76),h=a(83),f=a(82),b=a(173),v=a(187),E=a(193),C=a(192),g=a(174),w=a(175),S=a(176),k=a(177),x=a(22),y=a(178),N=a(179),j=a(185),A=a(181),I=a(182),B=a(191),O=a(183),_=a(129),U=a(128),D=a(180),R=a(184),M=a(190),W=a(188),q=a(52),z=a(41),L=a.n(z),P=a(162),G=a(166),T=a(167),V=a(189),H=a(168),J=a(169),Y=a(170),Z=a(171),Q=a(172);var $=function(e){var t=e.courseCode,a=e.keepable,n=e.keep,c=e.onDropClick;return r.a.createElement(P.a,null,r.a.createElement(G.a,{primary:t}),r.a.createElement(T.a,null,r.a.createElement(V.a,{xsUp:!a},r.a.createElement(H.a,{title:n?"This course will be kept unchanged in the schedule.":"This course is allowed to be changed"},r.a.createElement("span",null,r.a.createElement(J.a,{"aria-label":"keep unchanged",disabled:!a||!0},n?r.a.createElement(Y.a,null):r.a.createElement(Z.a,null))))),r.a.createElement(H.a,{title:"Drop this course"},r.a.createElement(J.a,{"aria-label":"drop",onClick:c},r.a.createElement(Q.a,null)))))},F=(a(122),a(32)),K=a.n(F),X=function(e){return"".concat(e.subject," ").concat(e.catalog_number)},ee=a(79),te=a.n(ee),ae=a(80),ne=a.n(ae),re=a(81),ce=a.n(re),se="4ad350333dc3859b91bcf443d14e4bf0",oe=Object(f.a)({palette:{primary:{main:q.a[500],light:"#6ec6ff",dark:"#0069c0"}}}),le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).loadCourseInfo=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.map((function(e){var t=e.split(" "),a=Object(u.a)(t,2),n=a[0],r=a[1];return"https://api.uwaterloo.ca/v2/courses/".concat(n,"/").concat(r,"/schedule.json")})),Promise.all(t.map((function(e){return L.a.get(e,{params:{key:se}})}))).then((function(e){var t=e.map((function(e){return e.data.data}));a.setState({courseInfo:t})}));case 2:case"end":return n.stop()}}))},a.parseCourses=function(e){var t=e.match(/^\d{4}$/gm),n=e.match(/[A-Z]{2,6} \d{1,3}[A-Z]? - /g).map((function(e){return e.substring(0,e.length-3)}));a.setState({currentCourses:n.map((function(e){return{courseCode:e,keepable:!0,keep:!0}})),currentClasses:t.map((function(e){return parseInt(e,10)}))}),a.loadCourseInfo(n)},a.showScheduleInvalidAlert=function(){return a.setState({scheduleInvalidAlertShow:!0})},a.hideScheduleInvalidAlert=function(e,t){"clickaway"!==t&&a.setState({scheduleInvalidAlertShow:!1})},a.showCourseUnavailAlert=function(){return a.setState({courseUnavailAlertShow:!0})},a.hideCourseUnavailAlert=function(){return a.setState({courseUnavailAlertShow:!1})},a.showModal=function(){var e=a.state.rawCourses;try{a.parseCourses(e),a.setState({modalShow:!0})}catch(t){a.showScheduleInvalidAlert()}},a.hideModal=function(){a.setState({modalShow:!1,subjectBox:"",courseNumberBox:"",courseNumbers:[]})},a.dropCourse=function(e){var t=a.state,n=t.currentCourses,r=t.courseInfo,c=n.filter((function(t){return t.courseCode!==e})),s=r.filter((function(t){return X(t[0])!==e}));a.setState({currentCourses:c,courseInfo:s}),a.render()},a.loadSubjects=function(){var e,t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return"https://api.uwaterloo.ca/v2/codes/subjects.json",n.next=3,l.a.awrap(L.a.get("https://api.uwaterloo.ca/v2/codes/subjects.json",{params:{key:se}}));case 3:e=n.sent,t=e.data.data.map((function(e){return e.subject})),a.setState({allSubjects:t});case 6:case"end":return n.stop()}}))},a.loadCourseNumbers=function(e){var t,n,r;return l.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=3;break}return a.setState({courseNumbers:[]}),c.abrupt("return");case 3:return t="https://api.uwaterloo.ca/v2/courses/".concat(e,".json"),c.next=6,l.a.awrap(L.a.get(t,{params:{key:se}}));case 6:n=c.sent,r=n.data.data.map((function(e){return e.catalog_number})),a.setState({courseNumbers:r});case 9:case"end":return c.stop()}}))},a.updateRawCourses=function(e){a.setState({rawCourses:e})},a.handleAddClick=function(){var e,t,n,r,c,s,o,u,i,m;return l.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e=a.state,t=e.subjectBox,n=e.courseNumberBox,r=e.currentCourses,c=e.courseInfo,t&&n){d.next=3;break}return d.abrupt("return");case 3:return s="https://api.uwaterloo.ca/v2/courses/".concat(t,"/").concat(n,"/schedule.json"),d.next=6,l.a.awrap(L.a.get(s,{params:{key:se}}));case 6:if(o=d.sent,u="".concat(t," ").concat(n),200===o.data.meta.status){d.next=11;break}return a.showCourseUnavailAlert(),d.abrupt("return");case 11:if(!(i=r.slice()).filter((function(e){return u===e.courseCode})).length){d.next=14;break}return d.abrupt("return");case 14:i.push({courseCode:u,keepable:!1,keep:!1}),(m=c.slice()).push(o.data.data),a.setState({currentCourses:i,courseInfo:m});case 18:case"end":return d.stop()}}))},a.handleViewScheduleClick=function(){var e=a.state,t=function(e,t,a){var n=K.a.keyBy(e,"courseCode"),r=a.map((function(e){var a=e.filter((function(e){return!e.classes.some((function(e){return e.date.is_closed}))&&!function(e){return"ONLN ONLINE"===e.campus}(e)}));return n[X(e[0])].keep&&(a=a.filter((function(e){return t.includes(e.class_number)}))),K.a.uniqWith(a,(function(e,t){if(e.associated_class!==t.associated_class)return!1;if(e.section.slice(0,3)!==t.section.slice(0,3))return!1;if(e.classes.length!==t.classes.length)return!1;for(var a=0;a<e.classes.length;a+=1)if(!K.a.isEqual(e.classes[a].date,t.classes[a].date))return!1;return!0}))})),c=r.map((function(e){var t=K.a.groupBy(e,(function(e){return e.section[4]})),a=[];return K.a.forEach(t,(function(e,t){a[t]=e})),a}));return{courses_info:r,filtered_courses:c.map((function(e){var t=e[0],a=e.slice(1);return t.map((function(e){var t=a.map((function(t){var a=t.filter((function(t){return a=t,e.associated_class===a.associated_class;var a}));return K.a.isEmpty(a)&&(a=t.filter((function(e){return 99===e.associated_class}))),K.a.map(a,"class_number")}));return[[e.class_number]].concat(t)}))}))}}(e.currentCourses,e.currentClasses,e.courseInfo);console.log(t)},a.state={modalShow:!1,currentCourses:[],currentClasses:[],allSubjects:[],courseNumbers:[],subjectBox:"",courseNumberBox:"",courseUnavailAlertShow:!1,rawCourses:"",courseInfo:[],scheduleInvalidAlertShow:!1},a.courseNumberBoxRef=r.a.createRef(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadSubjects()}},{key:"render",value:function(){var e=this,t=this.state,a=t.modalShow,n=t.currentCourses,c=t.allSubjects,s=t.courseNumbers,o=t.subjectBox,l=t.courseNumberBox,u=t.scheduleInvalidAlertShow,i=t.courseUnavailAlertShow;return r.a.createElement(b.a,{theme:oe},r.a.createElement(v.a,{p:2},r.a.createElement(E.a,null),r.a.createElement(C.a,{open:u,onClose:this.hideScheduleInvalidAlert,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(M.a,{severity:"warning",onClose:this.hideScheduleInvalidAlert},"Your course info cannot be read. Please try again.")),r.a.createElement("img",{src:te.a,alt:"Logo",className:"logo"}),r.a.createElement(g.a,{container:!0,justify:"center",spacing:6},r.a.createElement(g.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(w.a,{className:"card",raised:!0},r.a.createElement(S.a,{title:"Step 1",className:"header"}),r.a.createElement(k.a,null,r.a.createElement(x.a,{variant:"body1"},"Go to\xa0",r.a.createElement(y.a,{href:"https://quest.pecs.uwaterloo.ca/psp/SS/ACADEMIC/SA/?cmd=login&languageCd=ENG",target:"_blank"},"Quest"),'\xa0and click "Class Schedule".')),r.a.createElement(N.a,{image:ne.a,title:"Go to Class Schedule",className:"step-img"}))),r.a.createElement(g.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(w.a,{className:"card",raised:!0},r.a.createElement(S.a,{title:"Step 2",className:"header"}),r.a.createElement(k.a,null,r.a.createElement(x.a,{variant:"body1"},"Choose your term, select all and copy.")),r.a.createElement(N.a,{image:ce.a,title:"Select All and Copy",className:"step-img"}))),r.a.createElement(g.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(w.a,{raised:!0,style:{display:"flex",flexDirection:"column",height:"100%"}},r.a.createElement(S.a,{title:"Step 3",className:"header"}),r.a.createElement(k.a,null,r.a.createElement(v.a,{mb:2},r.a.createElement(x.a,{variant:"body1"},"Paste into the box below.")),r.a.createElement(j.a,{multiline:!0,required:!0,variant:"outlined",fullWidth:!0,rows:12,onChange:function(t){return e.updateRawCourses(t.target.value)}})),r.a.createElement(A.a,{className:"stick-bottom"},r.a.createElement(v.a,{p:1,width:1},r.a.createElement(I.a,{color:"primary",variant:"contained",size:"large",fullWidth:!0,onClick:this.showModal},"Next")))))),r.a.createElement(B.a,{open:a,onClose:this.hideModal,className:"flex-container",style:{alignItems:"center",justifyContent:"center"},BackdropComponent:O.a,BackdropProps:{timeout:500},closeAfterTransition:!0},r.a.createElement(_.a,{in:a},r.a.createElement(U.a,{style:{width:800,outline:"none"}},r.a.createElement(v.a,{p:2,className:"header"},r.a.createElement(x.a,{variant:"h5"},"Edit my courses")),r.a.createElement(g.a,{container:!0},r.a.createElement(g.a,{item:!0,xs:12,sm:!0},r.a.createElement(D.a,{style:{overflowY:"scroll",height:360}},n.map((function(t){var a=t.courseCode,n=t.keepable,c=t.keep;return r.a.createElement($,{key:a,courseCode:a,keepable:n,keep:c,onDropClick:function(){return e.dropCourse(a)}})})))),r.a.createElement(g.a,{item:!0,xs:12,sm:!0},r.a.createElement(v.a,{p:2},r.a.createElement(W.a,{className:"margin-bottom-16",id:"subjectBox",options:c,renderInput:function(e){return r.a.createElement(j.a,Object.assign({},e,{label:"Subject",variant:"outlined",fullWidth:!0}))},onChange:function(t,a){a!==o&&(e.loadCourseNumbers(a),e.setState({subjectBox:(a||"").toUpperCase(),courseNumberBox:""}),a&&e.courseNumberBoxRef.current.focus())},value:o}),r.a.createElement(W.a,{className:"margin-bottom-16",id:"courseNumberBox",options:s,getOptionLabel:function(e){return e},renderInput:function(t){return r.a.createElement(j.a,Object.assign({},t,{label:"Course number",variant:"outlined",fullWidth:!0,inputRef:e.courseNumberBoxRef}))},onChange:function(t,a){e.setState({courseNumberBox:a})},value:l}),r.a.createElement("div",{className:"flex-container"},r.a.createElement(v.a,{ml:"auto"},r.a.createElement(I.a,{color:"primary",variant:"outlined",onClick:this.handleAddClick},"Add Course"))),r.a.createElement(C.a,{open:i,onClose:this.hideCourseUnavailAlert,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(M.a,{severity:"warning",onClose:this.hideCourseUnavailAlert},"".concat(o," ").concat(l),"\xa0is unavailable for this term."))))),r.a.createElement(R.a,null),r.a.createElement(v.a,{p:2},r.a.createElement(I.a,{size:"large",variant:"contained",color:"primary",fullWidth:!0,onClick:this.handleViewScheduleClick},"View Recommended Schedules")))))))}}]),t}(r.a.Component);s.a.render(r.a.createElement(le,null),document.getElementById("root"))},79:function(e,t,a){e.exports=a.p+"static/media/icon.47f3ae83.svg"},80:function(e,t,a){e.exports=a.p+"static/media/calendar-step-1.5a0cc442.png"},81:function(e,t,a){e.exports=a.p+"static/media/calendar-step-2.514203ac.png"},95:function(e,t,a){e.exports=a(124)}},[[95,1,2]]]);
//# sourceMappingURL=main.0125eb82.chunk.js.map