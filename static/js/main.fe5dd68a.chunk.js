(this["webpackJsonpschedule-planner"]=this["webpackJsonpschedule-planner"]||[]).push([[0],{112:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),s=a.n(o),c=(a(91),a(29)),u=a.n(c),l=a(75),i=a(33),d=a(23),m=a(41),p=a(42),f=a(48),h=a(150),b=a(151),C=a(163),v=a(162),g=a(149),E=a(160),k=a(152),w=a(153),S=a(159),j=a(161),x=a(68),y=a.n(x),N=a(38),B=a.n(N),I=(a(66),function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).onMouseEnter=function(){a.setState({isHovered:!0})},a.onMouseLeave=function(){a.setState({isHovered:!1})},a.onKeepChange=function(e){console.log(e),a.setState({keep:e})};var n=e.courseCode,r=e.keepable,o=e.keep,s=e.onDropClick;return a.courseCode=n,a.keepable=r,a.keep=o,a.onDropClick=s,a.state={isHovered:!1},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.isHovered?{}:{visibility:"hidden"};return r.a.createElement("tr",{onClick:this.onClick,onMouseOver:this.onMouseEnter,onMouseOut:this.onMouseLeave},r.a.createElement("td",{style:{verticalAlign:"middle"}},this.courseCode),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement(g.a,{size:"sm",variant:"outline-danger",style:e,className:"DropButton",onClick:this.onDropClick},"\u2715")))}}]),t}(r.a.Component)),O=(a(112),a(70)),A=a.n(O),H="4ad350333dc3859b91bcf443d14e4bf0",M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).loadCourseInfo=function(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.map((function(e){var t=e.split(" "),a=Object(l.a)(t,2),n=a[0],r=a[1];return"https://api.uwaterloo.ca/v2/courses/".concat(n,"/").concat(r,"/schedule.json")})),Promise.all(t.map((function(e){return B.a.get(e,{params:{key:H}})}))).then((function(e){var t=e.map((function(e){return e.data.data}));console.log(t),a.setState({courseInfo:t})}));case 2:case"end":return n.stop()}}))},a.parseCourses=function(e){e.split("\n").filter((function(e){return/^[0-9]{4}$/.test(e)}));var t=e.match(/[A-Z]{2,6} \d{1,3}[A-Z]? - /g).map((function(e){return e.substring(0,e.length-3)}));a.setState({currentCourses:t.map((function(e){return{courseCode:e,keepable:!0,keep:!0}}))}),console.log(t),a.loadCourseInfo(t)},a.showModal=function(){var e=a.state.rawCourses;try{a.parseCourses(e),a.setState({modalShow:!0,hideAlert:!0})}catch(t){a.setState({hideAlert:!1})}},a.hideModal=function(){a.setState({modalShow:!1})},a.dropCourse=function(e){var t=a.state,n=t.currentCourses,r=t.courseInfo,o=n.filter((function(t){return t.courseCode!==e})),s=r.filter((function(t){var a=t[0],n=a.subject,r=a.catalog_number;return"".concat(n," ").concat(r)!==e}));a.setState({currentCourses:o,courseInfo:s}),a.render()},a.loadSubjects=function(){var e,t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return"https://api.uwaterloo.ca/v2/codes/subjects.json",n.next=3,u.a.awrap(B.a.get("https://api.uwaterloo.ca/v2/codes/subjects.json",{params:{key:H}}));case 3:e=n.sent,t=e.data.data.map((function(e){return e.subject})),a.setState({allSubjects:t});case 6:case"end":return n.stop()}}))},a.loadCourseNumbers=function(e){var t,n,r;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e){o.next=2;break}return o.abrupt("return");case 2:return t="https://api.uwaterloo.ca/v2/courses/".concat(e,".json"),o.next=5,u.a.awrap(B.a.get(t,{params:{key:H}}));case 5:n=o.sent,r=n.data.data.map((function(e){return e.catalog_number})),a.setState({courseNumbers:r});case 8:case"end":return o.stop()}}))},a.updateRawCourses=function(e){a.setState({rawCourses:e})},a.handleAddClick=function(){var e,t,n,r,o,s,c,l,i,d;return u.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return e=a.state,t=e.subjectBox,n=e.courseNumberBox,r=e.currentCourses,o=e.courseInfo,s="https://api.uwaterloo.ca/v2/courses/".concat(t,"/").concat(n,"/schedule.json"),m.next=4,u.a.awrap(B.a.get(s,{params:{key:H}}));case 4:if(c=m.sent,l="".concat(t," ").concat(n),200===c.data.meta.status){m.next=9;break}return alert("The course ".concat(l," is unavailable for this term.")),m.abrupt("return");case 9:if(!(i=r.slice()).filter((function(e){return l===e.courseCode})).length){m.next=12;break}return m.abrupt("return");case 12:i.push({courseCode:l,keepable:!1}),(d=o.slice()).push(c.data.data),a.setState({currentCourses:i,courseInfo:d});case 16:case"end":return m.stop()}}))},a.handleViewScheduleClick=function(){var e=a.state,t=(e.currentCourses,e.courseInfo);console.log(t);for(var n=t.map((function(e){return y.a.groupBy(e,(function(e){return e.section[4]}))})),r=[],o=function(e){var t=[];for(var a in n[e])t.push(n[e][a]);var o=t[0].map((function(e){var a=t.slice(1).map((function(t){var a=t.filter((function(t){return t.associated_class===e.associated_class}));return a.length||(a=t.filter((function(e){return 99===e.associated_class}))),a.map((function(e){return e.classNumber}))}));return[[e]].concat(a)}));r.push(o)},s=0;s<n.length;++s)o(s);console.log(r);var c={courses_info:t,filtered_courses:[]};console.log(c)},a.state={modalShow:!1,currentCourses:[],allSubjects:[],courseNumbers:[],subjectBox:"",courseNumberBox:"",showAlert:!1,rawCourses:"",courseInfo:[],hideAlert:!0},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log("mounted"),this.loadSubjects()}},{key:"render",value:function(){var e=this,t=this.state,a=t.modalShow,n=t.currentCourses,o=t.allSubjects,s=t.courseNumbers,c=(t.showAlert,t.subjectBox,t.courseNumberBox,t.hideAlert);return r.a.createElement("div",{className:"WelcomePage"},r.a.createElement(h.a,{variant:"warning",hidden:c},"Your course info cannot be read. Please try again."),r.a.createElement("img",{src:A.a,alt:"Logo",className:"Logo"}),r.a.createElement(b.a,{className:"StepsDeck"},r.a.createElement(C.a,{className:"Card",border:"primary"},r.a.createElement(C.a.Header,{className:"CardHeader",as:"h5"},"Step 1"),r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Text,null,'Go to Quest and click "Class Schedule".'),r.a.createElement(C.a.Img,{src:"https://uwflow.com/static/img/import-schedule/step-1.png"}))),r.a.createElement(C.a,{className:"Card"},r.a.createElement(C.a.Header,{className:"CardHeader",as:"h5"},"Step 2"),r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Text,null,"Choose your term, then select all and copy."),r.a.createElement(C.a.Img,{src:"https://uwflow.com/static/img/import-schedule/step-2.png"}))),r.a.createElement(C.a,{className:"Card"},r.a.createElement(C.a.Header,{className:"CardHeader",as:"h5"},"Step 3"),r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Text,null,"Paste into the box below."),r.a.createElement(v.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Control,{as:"textarea",className:"PasteBox",rows:"12",onChange:function(t){return e.updateRawCourses(t.target.value)}})),r.a.createElement(g.a,{className:"NextButton",block:!0,onClick:this.showModal},"Next"))))),r.a.createElement(E.a,{size:"lg",show:a,onHide:this.hideModal},r.a.createElement(k.a,null,r.a.createElement(C.a,{className:"CourseEditCard",style:{overflowY:"scroll"}},r.a.createElement(w.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Course"))),r.a.createElement("tbody",null,n.map((function(t){var a=t.courseCode,n=t.keepable,o=t.keep;return r.a.createElement(I,{key:a,courseCode:a,keepable:n,keep:o,onDropClick:function(){return e.dropCourse(a)}})}))))),r.a.createElement(C.a,{className:"CourseEditCard"},r.a.createElement(j.a,{className:"AutoCompleteInput",id:"subjectBox",options:o,renderInput:function(e){return r.a.createElement(S.a,Object.assign({},e,{label:"Subject",variant:"outlined",fullWidth:!0}))},fullWidth:!0,onSelect:function(t){e.loadCourseNumbers(t.target.value),e.setState({subjectBox:t.target.value.toUpperCase()})}}),r.a.createElement(j.a,{className:"AutoCompleteInput",id:"courseNumberBox",options:s,getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(S.a,Object.assign({},e,{label:"Course number",variant:"outlined",fullWidth:!0}))},onSelect:function(t){return e.setState({courseNumberBox:t.target.value})}}),r.a.createElement(g.a,{onClick:this.handleAddClick,style:{margin:"16px"}},"Add"))),r.a.createElement(g.a,{style:{margin:"16px"},onClick:this.handleViewScheduleClick},"View Recommended Schedules")))}}]),t}(r.a.Component);s.a.render(r.a.createElement(M,null),document.getElementById("root"))},70:function(e,t,a){e.exports=a.p+"static/media/icon.47f3ae83.svg"},86:function(e,t,a){e.exports=a(118)},91:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.fe5dd68a.chunk.js.map