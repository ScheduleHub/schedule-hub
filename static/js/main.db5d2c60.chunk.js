(this["webpackJsonpschedule-planner"]=this["webpackJsonpschedule-planner"]||[]).push([[0],{124:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(11),o=a.n(c),s=a(31),l=a.n(s),u=a(51),i=a(44),m=a(26),d=a(75),p=a(76),h=a(84),f=a(83),b=a(82),v=a(175),E=a(189),C=a(176),g=a(194),w=a(177),S=a(178),k=a(179),x=a(180),y=a(22),N=a(181),j=a(182),A=a(188),I=a(184),B=a(185),O=a(193),U=a(186),_=a(130),D=a(129),R=a(183),M=a(187),W=a(192),z=a(190),L=a(52),P=a(33),G=a.n(P),T=a(41),V=a.n(T),q=a(164),H=a(168),J=a(169),Y=a(191),Z=a(170),Q=a(171),$=a(172),F=a(173),K=a(174);var X=function(e){var t=e.courseCode,a=e.keepable,r=e.keep,c=e.onDropClick;return n.a.createElement(q.a,null,n.a.createElement(H.a,{primary:t}),n.a.createElement(J.a,null,n.a.createElement(Y.a,{xsUp:!a},n.a.createElement(Z.a,{title:r?"This course will be kept unchanged in the schedule.":"This course is allowed to be changed"},n.a.createElement("span",null,n.a.createElement(Q.a,{"aria-label":"keep unchanged",disabled:!a||!0},r?n.a.createElement($.a,null):n.a.createElement(F.a,null))))),n.a.createElement(Z.a,{title:"Drop this course"},n.a.createElement(Q.a,{"aria-label":"drop",onClick:c},n.a.createElement(K.a,null)))))},ee=(a(124),function(e){return"".concat(e.subject," ").concat(e.catalog_number)}),te=a(79),ae=a.n(te),re=a(80),ne=a.n(re),ce=a(81),oe=a.n(ce),se="4ad350333dc3859b91bcf443d14e4bf0",le=Object(f.a)({palette:{primary:{main:L.a[500],light:"#6ec6ff",dark:"#0069c0"}}}),ue=(Object(b.a)((function(e){return{screenshot:{height:300}}})),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).loadCourseInfo=function(e){var t;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:t=e.map((function(e){var t=e.split(" "),a=Object(u.a)(t,2),r=a[0],n=a[1];return"https://api.uwaterloo.ca/v2/courses/".concat(r,"/").concat(n,"/schedule.json")})),Promise.all(t.map((function(e){return V.a.get(e,{params:{key:se}})}))).then((function(e){var t=e.map((function(e){return e.data.data}));console.log(t),a.setState({courseInfo:t})}));case 2:case"end":return r.stop()}}))},a.parseCourses=function(e){var t=e.match(/^\d{4}$/gm),r=e.match(/[A-Z]{2,6} \d{1,3}[A-Z]? - /g).map((function(e){return e.substring(0,e.length-3)}));a.setState({currentCourses:r.map((function(e){return{courseCode:e,keepable:!0,keep:!0}})),currentClasses:t.map((function(e){return parseInt(e,10)}))}),a.loadCourseInfo(r)},a.showScheduleInvalidAlert=function(){return a.setState({scheduleInvalidAlertShow:!0})},a.hideScheduleInvalidAlert=function(e,t){"clickaway"!==t&&a.setState({scheduleInvalidAlertShow:!1})},a.showCourseUnavailAlert=function(){return a.setState({courseUnavailAlertShow:!0})},a.hideCourseUnavailAlert=function(){return a.setState({courseUnavailAlertShow:!1})},a.showModal=function(){var e=a.state.rawCourses;try{a.parseCourses(e),a.setState({modalShow:!0})}catch(t){a.showScheduleInvalidAlert()}},a.hideModal=function(){a.setState({modalShow:!1,subjectBox:"",courseNumberBox:"",courseNumbers:[]})},a.dropCourse=function(e){var t=a.state,r=t.currentCourses,n=t.courseInfo,c=r.filter((function(t){return t.courseCode!==e})),o=n.filter((function(t){return ee(t[0])!==e}));a.setState({currentCourses:c,courseInfo:o}),a.render()},a.loadSubjects=function(){var e,t;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return"https://api.uwaterloo.ca/v2/codes/subjects.json",r.next=3,l.a.awrap(V.a.get("https://api.uwaterloo.ca/v2/codes/subjects.json",{params:{key:se}}));case 3:e=r.sent,t=e.data.data.map((function(e){return e.subject})),a.setState({allSubjects:t});case 6:case"end":return r.stop()}}))},a.loadCourseNumbers=function(e){var t,r,n;return l.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=3;break}return a.setState({courseNumbers:[]}),c.abrupt("return");case 3:return t="https://api.uwaterloo.ca/v2/courses/".concat(e,".json"),c.next=6,l.a.awrap(V.a.get(t,{params:{key:se}}));case 6:r=c.sent,n=r.data.data.map((function(e){return e.catalog_number})),a.setState({courseNumbers:n});case 9:case"end":return c.stop()}}))},a.updateRawCourses=function(e){a.setState({rawCourses:e})},a.handleAddClick=function(){var e,t,r,n,c,o,s,u,i,m;return l.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e=a.state,t=e.subjectBox,r=e.courseNumberBox,n=e.currentCourses,c=e.courseInfo,t&&r){d.next=3;break}return d.abrupt("return");case 3:return o="https://api.uwaterloo.ca/v2/courses/".concat(t,"/").concat(r,"/schedule.json"),d.next=6,l.a.awrap(V.a.get(o,{params:{key:se}}));case 6:if(s=d.sent,u="".concat(t," ").concat(r),200===s.data.meta.status){d.next=11;break}return a.showCourseUnavailAlert(),d.abrupt("return");case 11:if(!(i=n.slice()).filter((function(e){return u===e.courseCode})).length){d.next=14;break}return d.abrupt("return");case 14:i.push({courseCode:u,keepable:!1,keep:!1}),(m=c.slice()).push(s.data.data),a.setState({currentCourses:i,courseInfo:m});case 18:case"end":return d.stop()}}))},a.handleViewScheduleClick=function(){var e=a.state,t=function(e,t,a){var r=a.map((function(e){return e.filter((function(e){return!("ONLN ONLINE"===e.campus)}))})),n=r.map((function(e){var t=G.a.groupBy(e,(function(e){return e.section[4]})),a=[];return G.a.forEach(t,(function(e,t){a[t]=e})),a})),c=G.a.keyBy(e,"courseCode");return{courses_info:r,filtered_courses:n.map((function(e){var a=e[0];c[ee(a[0])].keep&&(a=a.filter((function(e){return t.includes(e.class_number)})));var r=e.slice(1);return a.map((function(e){var t=r.map((function(t){var a=t.filter((function(t){return a=t,e.associated_class===a.associated_class;var a}));return G.a.isEmpty(a)&&(a=t.filter((function(e){return 99===e.associated_class}))),G.a.map(a,"class_number")}));return[[e.class_number]].concat(t)}))}))}}(e.currentCourses,e.currentClasses,e.courseInfo);console.log(t)},a.state={modalShow:!1,currentCourses:[],currentClasses:[],allSubjects:[],courseNumbers:[],subjectBox:"",courseNumberBox:"",courseUnavailAlertShow:!1,rawCourses:"",courseInfo:[],scheduleInvalidAlertShow:!1},a.courseNumberBoxRef=n.a.createRef(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadSubjects()}},{key:"render",value:function(){var e=this,t=this.state,a=t.modalShow,r=t.currentCourses,c=t.allSubjects,o=t.courseNumbers,s=t.subjectBox,l=t.courseNumberBox,u=t.scheduleInvalidAlertShow,i=t.courseUnavailAlertShow;return n.a.createElement(v.a,{theme:le},n.a.createElement(E.a,{p:2},n.a.createElement(C.a,null),n.a.createElement(g.a,{open:u,onClose:this.hideScheduleInvalidAlert,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"}},n.a.createElement(W.a,{severity:"warning",onClose:this.hideScheduleInvalidAlert},"Your course info cannot be read. Please try again.")),n.a.createElement("img",{src:ae.a,alt:"Logo",className:"logo"}),n.a.createElement(w.a,{container:!0,justify:"center",spacing:6},n.a.createElement(w.a,{item:!0,xs:12,md:4,lg:3},n.a.createElement(S.a,{className:"card",raised:!0},n.a.createElement(k.a,{title:"Step 1",className:"header"}),n.a.createElement(x.a,null,n.a.createElement(y.a,{variant:"body1"},"Go to\xa0",n.a.createElement(N.a,{href:"https://quest.pecs.uwaterloo.ca/psp/SS/ACADEMIC/SA/?cmd=login&languageCd=ENG",target:"_blank"},"Quest"),'\xa0and click "Class Schedule".')),n.a.createElement(j.a,{image:ne.a,title:"Go to Class Schedule",className:"step-img"}))),n.a.createElement(w.a,{item:!0,xs:12,md:4,lg:3},n.a.createElement(S.a,{className:"card",raised:!0},n.a.createElement(k.a,{title:"Step 2",className:"header"}),n.a.createElement(x.a,null,n.a.createElement(y.a,{variant:"body1"},"Choose your term, select all and copy.")),n.a.createElement(j.a,{image:oe.a,title:"Select All and Copy",className:"step-img"}))),n.a.createElement(w.a,{item:!0,xs:12,md:4,lg:3},n.a.createElement(S.a,{raised:!0,style:{display:"flex",flexDirection:"column",height:"100%"}},n.a.createElement(k.a,{title:"Step 3",className:"header"}),n.a.createElement(x.a,null,n.a.createElement(E.a,{mb:2},n.a.createElement(y.a,{variant:"body1"},"Paste into the box below.")),n.a.createElement(A.a,{multiline:!0,required:!0,variant:"outlined",fullWidth:!0,rows:12,onChange:function(t){return e.updateRawCourses(t.target.value)}})),n.a.createElement(I.a,{className:"stick-bottom"},n.a.createElement(E.a,{p:1,width:1},n.a.createElement(B.a,{color:"primary",variant:"contained",size:"large",fullWidth:!0,onClick:this.showModal},"Next")))))),n.a.createElement(O.a,{open:a,onClose:this.hideModal,className:"flex-container",style:{alignItems:"center",justifyContent:"center"},BackdropComponent:U.a,BackdropProps:{timeout:500},closeAfterTransition:!0},n.a.createElement(_.a,{in:a},n.a.createElement(D.a,{style:{width:800,outline:"none"}},n.a.createElement(E.a,{p:2,className:"header"},n.a.createElement(y.a,{variant:"h5"},"Edit my courses")),n.a.createElement(w.a,{container:!0},n.a.createElement(w.a,{item:!0,xs:12,sm:!0},n.a.createElement(R.a,{style:{overflowY:"scroll",height:360}},r.map((function(t){var a=t.courseCode,r=t.keepable,c=t.keep;return n.a.createElement(X,{key:a,courseCode:a,keepable:r,keep:c,onDropClick:function(){return e.dropCourse(a)}})})))),n.a.createElement(w.a,{item:!0,xs:12,sm:!0},n.a.createElement(E.a,{p:2},n.a.createElement(z.a,{className:"margin-bottom-16",id:"subjectBox",options:c,renderInput:function(e){return n.a.createElement(A.a,Object.assign({},e,{label:"Subject",variant:"outlined",fullWidth:!0}))},onChange:function(t,a){a!==s&&(e.loadCourseNumbers(a),e.setState({subjectBox:(a||"").toUpperCase(),courseNumberBox:""}),a&&e.courseNumberBoxRef.current.focus())},value:s}),n.a.createElement(z.a,{className:"margin-bottom-16",id:"courseNumberBox",options:o,getOptionLabel:function(e){return e},renderInput:function(t){return n.a.createElement(A.a,Object.assign({},t,{label:"Course number",variant:"outlined",fullWidth:!0,inputRef:e.courseNumberBoxRef}))},onChange:function(t,a){e.setState({courseNumberBox:a})},value:l}),n.a.createElement("div",{className:"flex-container"},n.a.createElement(E.a,{ml:"auto"},n.a.createElement(B.a,{color:"primary",variant:"outlined",onClick:this.handleAddClick},"Add Course"))),n.a.createElement(g.a,{open:i,onClose:this.hideCourseUnavailAlert,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"}},n.a.createElement(W.a,{severity:"warning",onClose:this.hideCourseUnavailAlert},"".concat(s," ").concat(l),"\xa0is unavailable for this term."))))),n.a.createElement(M.a,null),n.a.createElement(E.a,{p:2},n.a.createElement(B.a,{size:"large",variant:"contained",color:"primary",fullWidth:!0,onClick:this.handleViewScheduleClick},"View Recommended Schedules")))))))}}]),t}(n.a.Component));o.a.render(n.a.createElement(ue,null),document.getElementById("root"))},79:function(e,t,a){e.exports=a.p+"static/media/icon.47f3ae83.svg"},80:function(e,t,a){e.exports=a.p+"static/media/calendar-step-1.6611ddd8.png"},81:function(e,t,a){e.exports=a.p+"static/media/calendar-step-2.cb8ab16f.png"},96:function(e,t,a){e.exports=a(125)}},[[96,1,2]]]);
//# sourceMappingURL=main.db5d2c60.chunk.js.map