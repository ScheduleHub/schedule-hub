(this["webpackJsonpschedule-planner"]=this["webpackJsonpschedule-planner"]||[]).push([[0],{124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),s=a.n(c),o=a(13),u=a.n(o),l=a(12),i=a(83),m=a(84),p=a(172),d=a(173),f=a(196),h=a(175),b=a(176),g=a(177),E=a(178),v=a(179),x=a(24),k=a(180),j=a(181),C=a(191),y=a(190),w=a(195),O=a(183),S=a(128),N=a(85),I=a(184),U=a(185),q=a(167),_=a(168),B=a(182),L=a(193),R=a(187),W=a(188),D=a(189),A=a(194),G=a(174),M=a(192),P=a(52),T=a(38),z=a.n(T),H=a(161),K=a(165),$=a(166),J=a(169),Y=a(170),Z=a(171);var Q=function(e){var t=e.courseCode,a=e.keepable,n=e.keep,c=e.onDropClick;return r.a.createElement(H.a,null,r.a.createElement(K.a,{primary:t}),r.a.createElement($.a,null,r.a.createElement(L.a,{xsUp:!a},r.a.createElement(q.a,{title:n?"This course will be kept unchanged in the schedule.":"This course is allowed to be changed"},r.a.createElement("span",null,r.a.createElement(_.a,{"aria-label":"keep unchanged",disabled:!a||!0},n?r.a.createElement(J.a,null):r.a.createElement(Y.a,null))))),r.a.createElement(q.a,{title:"Drop this course"},r.a.createElement(_.a,{"aria-label":"drop",onClick:c},r.a.createElement(Z.a,null)))))},V=a(23),F=a.n(V),X=function(e){return"".concat(e.subject," ").concat(e.catalog_number)},ee=function(e){return"ONLN ONLINE"===e.campus},te=function(e,t,a){var n=F.a.keyBy(e,"courseCode"),r=a.map((function(e){var a=e.filter((function(e){return!e.classes.some((function(e){return e.date.is_closed}))&&!ee(e)}));return n[X(e[0])].keep&&(a=a.filter((function(e){return t.includes(e.class_number)}))),F.a.uniqWith(a,(function(e,t){if(e.associated_class!==t.associated_class)return!1;if(e.section.slice(0,3)!==t.section.slice(0,3))return!1;if(e.classes.length!==t.classes.length)return!1;for(var a=0;a<e.classes.length;a+=1)if(!F.a.isEqual(e.classes[a].date,t.classes[a].date))return!1;return!0}))})),c=r.map((function(e){var t=F.a.groupBy(e,(function(e){return e.section[4]})),a=[];return F.a.forEach(t,(function(e,t){a[t]=e})),a}));return{courses_info:r,filtered_courses:c.map((function(e){var t=e[0],a=e.slice(1);return t.map((function(e){var t=a.map((function(t){var a=t.filter((function(t){return a=t,e.associated_class===a.associated_class;var a}));return F.a.isEmpty(a)&&(a=t.filter((function(e){return 99===e.associated_class}))),F.a.map(a,"class_number")}));return[[e.class_number]].concat(t)}))}))}},ae=a(54),ne=a(48),re="https://api.uwaterloo.ca/v2",ce=function e(t){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e3;Object(ne.a)(this,e),this.sendUrlRequest=function(e){var t,n,r,c,s,o,l=arguments;return u.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:{},i.next=3,u.a.awrap(z.a.get(e,{baseURL:re,params:Object(ae.a)({},t,{key:a.apiKey}),timeout:a.timeout,timeoutErrorMessage:"timeout ".concat(a.timeout)}));case 3:if(n=i.sent,r=n.data,c=r.meta,s=r.data,200===c.status){i.next=9;break}throw(o=Error(c.message)).name="UW ".concat(c.status),o;case 9:return i.abrupt("return",s);case 10:case"end":return i.stop()}}))},this.sendBulkUrlRequest=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=z.a.create({baseURL:re,timeout:a.timeout,timeoutErrorMessage:"timeout ".concat(a.timeout)}),r=e.map((function(e){return n.get(e,{params:Object(ae.a)({},t,{key:a.apiKey})})}));return r},this.getSubjectCodes=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(a.sendUrlRequest("/codes/subjects.json"));case 2:return e=t.sent,t.abrupt("return",e.map((function(e){return e.subject})));case 4:case"end":return t.stop()}}))},this.getCourseNumbers=function(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(a.sendUrlRequest("/courses/".concat(e,".json")));case 2:return t=n.sent,n.abrupt("return",t.map((function(e){return e.catalog_number})));case 4:case"end":return n.stop()}}))},this.getCourseSchedule=function(e,t){var n,r,c,s=arguments;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:void 0,r="/courses/".concat(e,"/").concat(t,"/schedule.json"),o.next=4,u.a.awrap(a.sendUrlRequest(r,{term:n}));case 4:return c=o.sent,o.abrupt("return",c);case 6:case"end":return o.stop()}}))},this.getCourseScheduleMulti=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e.map((function(e){var t=e.split(" "),a=Object(l.a)(t,2),n=a[0],r=a[1];return"/courses/".concat(n,"/").concat(r,"/schedule.json")}));return a.sendBulkUrlRequest(n,{term:t})},this.apiKey=t,this.timeout=n},se=a(80),oe=a.n(se),ue=a(81),le=a.n(ue),ie=a(82),me=a.n(ie),pe=a(186),de=new ce("4ad350333dc3859b91bcf443d14e4bf0"),fe=Object(i.a)((function(e){return{addCourseInput:{marginBottom:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#ffffff"},currentCoursesList:{overflowY:"scroll",height:360},editCourseModal:{alignItems:"center",display:"flex",justifyContent:"center"},editCoursePaper:{outline:"none",width:800},flexContainer:{display:"flex",flexDirection:"column"},flexGrow:{flexGrow:1},fullHeight:{height:"100%"},header:{background:"#f5f5f5"},logo:{display:"block",height:"16vmin",marginTop:e.spacing(4),marginBottom:e.spacing(4),marginLeft:"auto",marginRight:"auto"},marginLeft:{marginLeft:e.spacing(2)},stepImage:{height:0,paddingTop:"100%"},stickBottom:{marginTop:"auto"},stickRight:{marginLeft:"auto"}}})),he=Object(m.a)({breakpoints:{values:{xs:0,sm:600,md:1024,lg:1440,xl:1920}},palette:{primary:{main:P.a[500],light:"#6ec6ff",dark:"#0069c0"}}});var be=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),o=Object(l.a)(s,2),i=o[0],m=o[1],P=Object(n.useState)([]),T=Object(l.a)(P,2),H=T[0],K=T[1],$=Object(n.useState)([]),J=Object(l.a)($,2),Y=J[0],Z=J[1],V=Object(n.useState)([]),ae=Object(l.a)(V,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(!1),se=Object(l.a)(ce,2),ue=se[0],ie=se[1],be=Object(n.useState)(!1),ge=Object(l.a)(be,2),Ee=ge[0],ve=ge[1],xe=Object(n.useState)(!1),ke=Object(l.a)(xe,2),je=ke[0],Ce=ke[1],ye=Object(n.useState)(""),we=Object(l.a)(ye,2),Oe=we[0],Se=we[1],Ne=Object(n.useState)(""),Ie=Object(l.a)(Ne,2),Ue=Ie[0],qe=Ie[1],_e=Object(n.useState)(""),Be=Object(l.a)(_e,2),Le=Be[0],Re=Be[1],We=Object(n.useState)(""),De=Object(l.a)(We,2),Ae=De[0],Ge=De[1],Me=Object(n.useState)(""),Pe=Object(l.a)(Me,2),Te=Pe[0],ze=Pe[1],He=Object(n.useState)(""),Ke=Object(l.a)(He,2),$e=Ke[0],Je=Ke[1],Ye=Object(n.useState)(!1),Ze=Object(l.a)(Ye,2),Qe=Ze[0],Ve=Ze[1],Fe=Object(n.useRef)(),Xe=fe(),et=function(e,t,a){Se(e),Re(t),qe(a||""),Ce(!0)},tt=function(e,t){"clickaway"!==t&&Ce(!1)};Object(n.useEffect)((function(){!function(){var e;u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.awrap(de.getSubjectCodes());case 3:e=t.sent,m(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),et("error","Unable to load courses.");case 10:case"end":return t.stop()}}),null,null,[[0,7]])}()}),[]);var at=function(e,t){var a=F.a.flatten(e).map((function(e){return e.class_number}));return t.every((function(e){return a.includes(e)}))},nt=function(){et("warning","Please make sure it's correct and try again.","Your course info cannot be read")},rt=function(e){var t=e.match(/^\d{4}$/gm),a=e.match(/[A-Z]{2,6} \d{1,3}[A-Z]? - /g).map((function(e){return e.substring(0,e.length-3)}));e.match(/^\d{3}$/gm).length===t.length&&e.match(/^0\d{2}$/gm).length===a.length?function(e,t){var a;u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:a=de.getCourseScheduleMulti(e),ve(!0),z.a.all(a).then((function(a){var n=a.map((function(e){return e.data.data}));at(n,t)?(c(n),re(e.map((function(e){return{courseCode:e,keepable:!0,keep:!0}}))),Z(t),ie(!0)):nt()})).catch((function(e){e.message.startsWith("timeout")?et("error","Network Timeout"):et("error",e.message)})).finally((function(){Ge(""),ve(!1)}));case 3:case"end":return n.stop()}}))}(a,t.map((function(e){return parseInt(e,10)}))):nt()},ct=function(){ie(!1),ze(""),Je(""),K([])},st=function(e){try{tt(),Ge(e),function(e){try{rt(e)}catch(t){nt()}}(e)}catch(t){et("error",t.message)}};return r.a.createElement(p.a,{theme:he},r.a.createElement(d.a,null),r.a.createElement(f.a,{open:je,onClose:tt,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3},r.a.createElement(A.a,{severity:Oe,onClose:tt},Ue&&r.a.createElement(G.a,null,Ue),Le)),r.a.createElement("img",{src:oe.a,alt:"Logo",className:Xe.logo}),r.a.createElement(h.a,{maxWidth:"lg"},r.a.createElement(b.a,{container:!0,justify:"center",spacing:4},r.a.createElement(b.a,{item:!0,xs:12,sm:10,md:!0},r.a.createElement(g.a,{raised:!0},r.a.createElement(E.a,{title:"Step 1",className:Xe.header}),r.a.createElement(v.a,null,r.a.createElement(x.a,{variant:"body1"},"Go to\xa0",r.a.createElement(k.a,{href:"https://quest.pecs.uwaterloo.ca/psp/SS/ACADEMIC/SA/?cmd=login&languageCd=ENG",target:"_blank"},"Quest"),', click "Class Schedule".')),r.a.createElement(j.a,{image:le.a,title:"Go to Class Schedule",className:Xe.stepImage}))),r.a.createElement(b.a,{item:!0,xs:12,sm:10,md:!0},r.a.createElement(g.a,{className:"".concat(Xe.flexContainer," ").concat(Xe.fullHeight),raised:!0},r.a.createElement(E.a,{title:"Step 2",className:Xe.header}),r.a.createElement(v.a,null,r.a.createElement(x.a,{variant:"body1"},"Select all and copy.")),r.a.createElement(j.a,{image:me.a,title:"Select All and Copy",className:"".concat(Xe.stepImage," ").concat(Xe.stickBottom)}))),r.a.createElement(b.a,{item:!0,xs:12,sm:10,md:!0},r.a.createElement(g.a,{className:"".concat(Xe.flexContainer," ").concat(Xe.fullHeight),raised:!0},r.a.createElement(E.a,{title:"Step 3",className:Xe.header}),r.a.createElement(v.a,{className:"".concat(Xe.flexContainer," ").concat(Xe.flexGrow)},r.a.createElement(C.a,{mb:2},r.a.createElement(x.a,{variant:"body1"},"Paste into the box below.")),r.a.createElement(y.a,{className:Xe.flexGrow,value:Ae,onPaste:function(e){return st(e.clipboardData.getData("text/plain"))},multiline:!0,required:!0,variant:"outlined",fullWidth:!0,rows:12,InputProps:{className:Xe.fullHeight},inputProps:{className:Xe.fullHeight}})))))),r.a.createElement(w.a,{open:ue,onClose:ct,className:Xe.editCourseModal,BackdropComponent:O.a,BackdropProps:{timeout:500},closeAfterTransition:!0,disableBackdropClick:!0},r.a.createElement(S.a,{in:ue},r.a.createElement(N.a,{className:Xe.editCoursePaper},r.a.createElement(I.a,{position:"static",color:"default",elevation:0},r.a.createElement(U.a,null,r.a.createElement(x.a,{variant:"h6",className:Xe.flexGrow},"Edit my courses"),r.a.createElement(q.a,{title:"Close"},r.a.createElement(_.a,{"aria-label":"close",onClick:ct},r.a.createElement(pe.a,null))))),r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:12,sm:!0},r.a.createElement(B.a,{className:Xe.currentCoursesList},ne.map((function(e){var t=e.courseCode,n=e.keepable,s=e.keep;return r.a.createElement(Q,{key:t,courseCode:t,keepable:n,keep:s,onDropClick:function(){return function(e){var t=ne.filter((function(t){return t.courseCode!==e})),n=a.filter((function(t){return X(t[0])!==e}));re(t),c(n)}(t)}})}))),r.a.createElement(L.a,{smUp:!0},r.a.createElement(R.a,null))),r.a.createElement(b.a,{item:!0,xs:12,sm:!0},r.a.createElement(C.a,{p:2,display:"flex",flexDirection:"column"},r.a.createElement(M.a,{className:Xe.addCourseInput,id:"subjectBox",options:i,renderInput:function(e){return r.a.createElement(y.a,Object.assign({},e,{label:"Subject",variant:"outlined",fullWidth:!0}))},onChange:function(e,t){t!==Te&&(!function(e){var t;u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=3;break}return K([]),a.abrupt("return");case 3:return a.prev=3,a.next=6,u.a.awrap(de.getCourseNumbers(e));case 6:t=a.sent,K(t),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),K([]);case 13:case"end":return a.stop()}}),null,null,[[3,10]])}(t),ze((t||"").toUpperCase()),Je(""),t&&Fe.current.focus())},value:Te}),r.a.createElement(M.a,{className:Xe.addCourseInput,id:"courseNumberBox",options:H,getOptionLabel:function(e){return e},renderInput:function(e){return r.a.createElement(y.a,Object.assign({},e,{label:"Course number",variant:"outlined",fullWidth:!0,inputRef:Fe}))},onChange:function(e,t){Je(t)},value:$e}),r.a.createElement(C.a,{mx:0,display:"flex",alignItems:"center",justifyContent:"flex-end"},Qe&&r.a.createElement(W.a,{size:36/Math.sqrt(2)}),r.a.createElement(D.a,{color:"primary",variant:"outlined",onClick:function(){var e,t,n,r,s;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(Te&&$e){o.next=2;break}return o.abrupt("return");case 2:if(Ve(!0),e="".concat(Te," ").concat($e),!(t=ne.slice()).some((function(t){return e===t.courseCode}))){o.next=9;break}return et("info","".concat(e," is already in your schedule.")),Ve(!1),o.abrupt("return");case 9:return o.prev=9,o.next=12,u.a.awrap(de.getCourseSchedule(Te,$e));case 12:if(!(n=o.sent).every(ee)){o.next=17;break}throw(r=new Error("".concat(e," is only available online."))).name="UW online",r;case 17:t.push({courseCode:e,keepable:!1,keep:!1}),(s=a.slice()).push(n),re(t),c(s),o.next=27;break;case 24:o.prev=24,o.t0=o.catch(9),"UW 204"===o.t0.name?et("warning","".concat(e," is unavailable for this term.")):"UW online"===o.t0.name?et("warning",o.t0.message):o.t0.message.startsWith("timeout")?et("error","Network Timeout"):et("error",o.t0.message);case 27:return o.prev=27,Ve(!1),o.finish(27);case 30:case"end":return o.stop()}}),null,null,[[9,24,27,30]])},className:Xe.marginLeft,disabled:Qe},"Add Course"))))),r.a.createElement(R.a,null),r.a.createElement(C.a,{p:2},r.a.createElement(D.a,{size:"large",variant:"contained",color:"primary",fullWidth:!0,onClick:function(){var e,t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=te(ne,Y,a),console.log(e),"https://qemn8c6rx9.execute-api.us-east-2.amazonaws.com/test/handleschedulerequest",n.prev=3,n.next=6,u.a.awrap(z.a.post("https://qemn8c6rx9.execute-api.us-east-2.amazonaws.com/test/handleschedulerequest",e,{timeout:1e5}));case 6:t=n.sent,console.log(t),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.log(n.t0);case 13:case"end":return n.stop()}}),null,null,[[3,10]])},disabled:Qe},"View Recommended Schedules"))))),r.a.createElement(O.a,{className:Xe.backdrop,open:Ee},r.a.createElement(W.a,{color:"inherit"})))};s.a.render(r.a.createElement(be,null),document.getElementById("root"))},80:function(e,t,a){e.exports=a.p+"static/media/icon.47f3ae83.svg"},81:function(e,t,a){e.exports=a.p+"static/media/calendar-step-1.5a0cc442.png"},82:function(e,t,a){e.exports=a.p+"static/media/calendar-step-2.514203ac.png"},96:function(e,t,a){e.exports=a(124)}},[[96,1,2]]]);
//# sourceMappingURL=main.192679b9.chunk.js.map