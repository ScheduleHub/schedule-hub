(this["webpackJsonpschedule-planner"]=this["webpackJsonpschedule-planner"]||[]).push([[0],{122:function(e,a,t){},124:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(11),s=t.n(c),o=t(32),u=t.n(o),l=t(51),i=t(44),m=t(27),d=t(75),p=t(76),f=t(83),h=t(82),b=t(173),g=t(187),E=t(193),k=t(192),C=t(174),v=t(175),w=t(176),x=t(177),S=t(23),y=t(178),N=t(179),j=t(185),O=t(191),I=t(181),B=t(129),A=t(128),_=t(180),P=t(182),D=t(183),T=t(184),R=t(190),M=t(188),G=t(52),L=t(40),U=t.n(L),V=t(162),W=t(166),q=t(167),z=t(189),$=t(168),J=t(169),Y=t(170),Z=t(171),H=t(172);var Q=function(e){var a=e.courseCode,t=e.keepable,n=e.keep,c=e.onDropClick;return r.a.createElement(V.a,null,r.a.createElement(W.a,{primary:a}),r.a.createElement(q.a,null,r.a.createElement(z.a,{xsUp:!t},r.a.createElement($.a,{title:n?"This course will be kept unchanged in the schedule.":"This course is allowed to be changed"},r.a.createElement("span",null,r.a.createElement(J.a,{"aria-label":"keep unchanged",disabled:!t||!0},n?r.a.createElement(Y.a,null):r.a.createElement(Z.a,null))))),r.a.createElement($.a,{title:"Drop this course"},r.a.createElement(J.a,{"aria-label":"drop",onClick:c},r.a.createElement(H.a,null)))))},F=(t(122),t(22)),K=t.n(F),X=function(e){return"".concat(e.subject," ").concat(e.catalog_number)},ee=t(79),ae=t.n(ee),te=t(80),ne=t.n(te),re=t(81),ce=t.n(re),se="4ad350333dc3859b91bcf443d14e4bf0",oe=Object(h.a)({palette:{primary:{main:G.a[500],light:"#6ec6ff",dark:"#0069c0"}}}),ue=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(p.a)(a).call(this,e))).isValidSchedule=function(e,a){var t=K.a.flatten(e).map((function(e){return e.class_number}));return a.every((function(e){return t.includes(e)}))},t.loadCourseInfo=function(e,a){var n,r;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:6e3,n=U.a.create({baseURL:"https://api.uwaterloo.ca/v2/courses",timeout:6e3}),r=e.map((function(e){var a=e.split(" "),t=Object(l.a)(a,2),r=t[0],c=t[1];return n.get("/".concat(r,"/").concat(c,"/schedule.json"),{params:{key:se}})})),t.setState({fullPageOverlayOpen:!0}),U.a.all(r).then((function(n){var r=n.map((function(e){return e.data.data}));t.isValidSchedule(r,a)?t.setState({courseInfo:r,currentCourses:e.map((function(e){return{courseCode:e,keepable:!0,keep:!0}})),currentClasses:a,modalShow:!0}):t.showScheduleInvalidAlert()})).catch((function(e){e.message==="timeout of ".concat(6e3,"ms exceeded")?t.showSnackbar("error","Network Timeout"):t.showSnackbar("error",e.message)})).finally((function(){t.setState({fullPageOverlayOpen:!1})}));case 5:case"end":return c.stop()}}))},t.parseCourses=function(e){var a=e.match(/^\d{4}$/gm),n=e.match(/[A-Z]{2,6} \d{1,3}[A-Z]? - /g).map((function(e){return e.substring(0,e.length-3)}));e.match(/^\d{3}$/gm).length===a.length&&e.match(/^0\d{2}$/gm).length===n.length?t.loadCourseInfo(n,a.map((function(e){return parseInt(e,10)}))):t.showScheduleInvalidAlert()},t.showScheduleInvalidAlert=function(){return t.showSnackbar("warning","Your course info cannot be read.\nPlease make sure it's correct and try again.")},t.showCourseUnavailAlert=function(){var e=t.state,a=e.subjectBox,n=e.courseNumberBox;t.showSnackbar("warning","".concat(a," ").concat(n," is unavailable for this term."))},t.hideSnackbar=function(e,a){"clickaway"!==a&&t.setState({snackbarOpen:!1})},t.showModal=function(e){try{t.parseCourses(e)}catch(a){t.showScheduleInvalidAlert()}},t.hideModal=function(){t.setState({modalShow:!1,subjectBox:"",courseNumberBox:"",courseNumbers:[],rawCourses:""})},t.showSnackbar=function(e,a){t.setState({snackbarTheme:e,snackbarText:a,snackbarOpen:!0,rawCourses:""})},t.hideSnackbar=function(e,a){"clickaway"!==a&&t.setState({snackbarOpen:!1})},t.dropCourse=function(e){var a=t.state,n=a.currentCourses,r=a.courseInfo,c=n.filter((function(a){return a.courseCode!==e})),s=r.filter((function(a){return X(a[0])!==e}));t.setState({currentCourses:c,courseInfo:s}),t.render()},t.loadSubjects=function(){var e,a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return"https://api.uwaterloo.ca/v2/codes/subjects.json",n.next=3,u.a.awrap(U.a.get("https://api.uwaterloo.ca/v2/codes/subjects.json",{params:{key:se}}));case 3:e=n.sent,a=e.data.data.map((function(e){return e.subject})),t.setState({allSubjects:a});case 6:case"end":return n.stop()}}))},t.loadCourseNumbers=function(e){var a,n,r;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=3;break}return t.setState({courseNumbers:[]}),c.abrupt("return");case 3:return a="https://api.uwaterloo.ca/v2/courses/".concat(e,".json"),c.next=6,u.a.awrap(U.a.get(a,{params:{key:se}}));case 6:n=c.sent,r=n.data.data.map((function(e){return e.catalog_number})),t.setState({courseNumbers:r});case 9:case"end":return c.stop()}}))},t.handleRawCoursesInputChange=function(e){t.setState({rawCourses:e})},t.handleAddClick=function(){var e,a,n,r,c,s,o,l,i,m;return u.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e=t.state,a=e.subjectBox,n=e.courseNumberBox,r=e.currentCourses,c=e.courseInfo,a&&n){d.next=3;break}return d.abrupt("return");case 3:return s="https://api.uwaterloo.ca/v2/courses/".concat(a,"/").concat(n,"/schedule.json"),d.next=6,u.a.awrap(U.a.get(s,{params:{key:se}}));case 6:if(o=d.sent,l="".concat(a," ").concat(n),200===o.data.meta.status){d.next=11;break}return t.showCourseUnavailAlert(),d.abrupt("return");case 11:if(!(i=r.slice()).filter((function(e){return l===e.courseCode})).length){d.next=14;break}return d.abrupt("return");case 14:i.push({courseCode:l,keepable:!1,keep:!1}),(m=c.slice()).push(o.data.data),t.setState({currentCourses:i,courseInfo:m});case 18:case"end":return d.stop()}}))},t.handleViewScheduleClick=function(){var e=t.state,a=function(e,a,t){var n=K.a.keyBy(e,"courseCode"),r=t.map((function(e){var t=e.filter((function(e){return!e.classes.some((function(e){return e.date.is_closed}))&&!function(e){return"ONLN ONLINE"===e.campus}(e)}));return n[X(e[0])].keep&&(t=t.filter((function(e){return a.includes(e.class_number)}))),K.a.uniqWith(t,(function(e,a){if(e.associated_class!==a.associated_class)return!1;if(e.section.slice(0,3)!==a.section.slice(0,3))return!1;if(e.classes.length!==a.classes.length)return!1;for(var t=0;t<e.classes.length;t+=1)if(!K.a.isEqual(e.classes[t].date,a.classes[t].date))return!1;return!0}))})),c=r.map((function(e){var a=K.a.groupBy(e,(function(e){return e.section[4]})),t=[];return K.a.forEach(a,(function(e,a){t[a]=e})),t}));return{courses_info:r,filtered_courses:c.map((function(e){var a=e[0],t=e.slice(1);return a.map((function(e){var a=t.map((function(a){var t=a.filter((function(a){return t=a,e.associated_class===t.associated_class;var t}));return K.a.isEmpty(t)&&(t=a.filter((function(e){return 99===e.associated_class}))),K.a.map(t,"class_number")}));return[[e.class_number]].concat(a)}))}))}}(e.currentCourses,e.currentClasses,e.courseInfo);console.log(a)},t.handlePaste=function(e){try{t.hideSnackbar(),t.setState({rawCourses:e}),t.showModal(e)}catch(a){t.showSnackbar("error",a.message)}},t.state={modalShow:!1,currentCourses:[],currentClasses:[],allSubjects:[],courseNumbers:[],subjectBox:"",courseNumberBox:"",rawCourses:"",courseInfo:[],snackbarOpen:!1,snackbarTheme:"",snackbarText:"",fullPageOverlayOpen:!1},t.courseNumberBoxRef=r.a.createRef(),t}return Object(f.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadSubjects()}},{key:"render",value:function(){var e=this,a=this.state,t=a.modalShow,n=a.currentCourses,c=a.allSubjects,s=a.courseNumbers,o=a.subjectBox,u=a.courseNumberBox,l=a.fullPageOverlayOpen,i=a.rawCourses,m=a.snackbarTheme,d=a.snackbarOpen,p=a.snackbarText;return r.a.createElement(b.a,{theme:oe},r.a.createElement(g.a,{p:2},r.a.createElement(E.a,null),r.a.createElement(k.a,{open:d,onClose:this.hideSnackbar,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3},r.a.createElement(R.a,{severity:m,onClose:this.hideSnackbar},p)),r.a.createElement("img",{src:ae.a,alt:"Logo",className:"logo"}),r.a.createElement(C.a,{container:!0,justify:"center",spacing:6},r.a.createElement(C.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(v.a,{className:"card",raised:!0},r.a.createElement(w.a,{title:"Step 1",className:"header"}),r.a.createElement(x.a,null,r.a.createElement(S.a,{variant:"body1"},"Go to\xa0",r.a.createElement(y.a,{href:"https://quest.pecs.uwaterloo.ca/psp/SS/ACADEMIC/SA/?cmd=login&languageCd=ENG",target:"_blank"},"Quest"),'\xa0and click "Class Schedule".')),r.a.createElement(N.a,{image:ne.a,title:"Go to Class Schedule",className:"step-img"}))),r.a.createElement(C.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(v.a,{className:"card",raised:!0},r.a.createElement(w.a,{title:"Step 2",className:"header"}),r.a.createElement(x.a,null,r.a.createElement(S.a,{variant:"body1"},"Choose your term, select all and copy.")),r.a.createElement(N.a,{image:ce.a,title:"Select All and Copy",className:"step-img"}))),r.a.createElement(C.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(v.a,{raised:!0,style:{display:"flex",flexDirection:"column",height:"100%"}},r.a.createElement(w.a,{title:"Step 3",className:"header"}),r.a.createElement(x.a,{style:{display:"flex",flexDirection:"column",flexGrow:1,paddingBottom:"16px"}},r.a.createElement(g.a,{mb:2},r.a.createElement(S.a,{variant:"body1"},"Paste into the box below.")),r.a.createElement(j.a,{style:{flexGrow:1},value:i,onPaste:function(a){return e.handlePaste(a.clipboardData.getData("text/plain"))},multiline:!0,required:!0,variant:"outlined",fullWidth:!0,rows:12,onChange:function(a){return e.handleRawCoursesInputChange(a.target.value)},InputProps:{style:{height:"100%"}},inputProps:{style:{height:"100%"}}}))))),r.a.createElement(O.a,{open:t,onClose:this.hideModal,className:"flex-container",style:{alignItems:"center",justifyContent:"center"},BackdropComponent:I.a,BackdropProps:{timeout:500},closeAfterTransition:!0},r.a.createElement(B.a,{in:t},r.a.createElement(A.a,{style:{width:800,outline:"none"}},r.a.createElement(g.a,{p:2,className:"header"},r.a.createElement(S.a,{variant:"h5"},"Edit my courses")),r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0,xs:12,sm:!0},r.a.createElement(_.a,{style:{overflowY:"scroll",height:360}},n.map((function(a){var t=a.courseCode,n=a.keepable,c=a.keep;return r.a.createElement(Q,{key:t,courseCode:t,keepable:n,keep:c,onDropClick:function(){return e.dropCourse(t)}})})))),r.a.createElement(C.a,{item:!0,xs:12,sm:!0},r.a.createElement(g.a,{p:2},r.a.createElement(M.a,{className:"margin-bottom-16",id:"subjectBox",options:c,renderInput:function(e){return r.a.createElement(j.a,Object.assign({},e,{label:"Subject",variant:"outlined",fullWidth:!0}))},onChange:function(a,t){t!==o&&(e.loadCourseNumbers(t),e.setState({subjectBox:(t||"").toUpperCase(),courseNumberBox:""}),t&&e.courseNumberBoxRef.current.focus())},value:o}),r.a.createElement(M.a,{className:"margin-bottom-16",id:"courseNumberBox",options:s,getOptionLabel:function(e){return e},renderInput:function(a){return r.a.createElement(j.a,Object.assign({},a,{label:"Course number",variant:"outlined",fullWidth:!0,inputRef:e.courseNumberBoxRef}))},onChange:function(a,t){e.setState({courseNumberBox:t})},value:u}),r.a.createElement("div",{className:"flex-container"},r.a.createElement(g.a,{ml:"auto"},r.a.createElement(P.a,{color:"primary",variant:"outlined",onClick:this.handleAddClick},"Add Course")))))),r.a.createElement(D.a,null),r.a.createElement(g.a,{p:2},r.a.createElement(P.a,{size:"large",variant:"contained",color:"primary",fullWidth:!0,onClick:this.handleViewScheduleClick},"View Recommended Schedules")))))),r.a.createElement(I.a,{style:{zIndex:oe.zIndex.drawer+1,color:"#fff"},open:l},r.a.createElement(T.a,{color:"inherit"})))}}]),a}(r.a.Component);s.a.render(r.a.createElement(ue,null),document.getElementById("root"))},79:function(e,a,t){e.exports=t.p+"static/media/icon.47f3ae83.svg"},80:function(e,a,t){e.exports=t.p+"static/media/calendar-step-1.5a0cc442.png"},81:function(e,a,t){e.exports=t.p+"static/media/calendar-step-2.514203ac.png"},95:function(e,a,t){e.exports=t(124)}},[[95,1,2]]]);
//# sourceMappingURL=main.5b3fd3bd.chunk.js.map